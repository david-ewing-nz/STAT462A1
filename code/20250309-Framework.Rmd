---
title: "Assignment 1"
author: 
  - Simon Clarke
  - Xia Yu
  - David Ewing
date: "`r Sys.Date()`"
output:
  pdf_document:
    latex_engine: xelatex
    # mainfont: "Times New Roman"
    # CJKmainfont: "SimSun" 
---

```{r setup, include=FALSE}
library(ggplot2)
library(dplyr)
library(class)
library(tidyr)
# tinytex::tlmgr_install("unicode-math")
```

# Braking Distance

In this question, do not use the `lm` function or a module that provides an implementation of k-NN. You are allowed to use elementary statistical objects like mean, variance, etc.

We will be predicting the distance that a car takes to stop when driving at a certain speed. The dataset is from 1930, so it might be slightly outdated. Units are miles per hour (speed) and feet (distance).

## Data Preparation

```{r}
# Load and preprocess dataset
```

## Linear Regression (Without lm)

```{r}
# Compute slope and intercept for simple linear regression
```

Using the linear regression model, predict the braking distance for a car going at 30 km/h and include an 80% prediction interval.

```{r}
# Prediction for 30 km/h
```

## k-NN Model

```{r}
# Fit and predict using k-NN model
```

# Filipino Household Income

*In this question, you are allowed to use `lm`.*

Load the dataset `income.csv`, which contains more than 40000 entries of data about households in the Philippines. There is a lot to learn in this dataset, but in this assignment we are going to focus on predicting household income (`Total.Household.Income`) from the number of underage children living in the household (`Members.with.age.5...17.years.old`).

1.  For this assignment we will just be looking at the two features mentioned, so feel free to remove unnecessary columns and rename the feature names if that makes your life easier (I will just refer to these two features by `income` and `children` from now on).

2.  Split the dataset randomly into a training set (80%) and test set (20%).

3.  Perform a linear regression of type `income = b0 + b1 * children` for analysing the influence on `children` on `income`.

    1.  What is the specific form of the affine-linear model, i.e.¬†what are `b0` and `b1`.?

    2.  What is the predicted mean income of a household with ùëõn children, for ùëõ‚àà{0,1,‚Ä¶,8}n‚àà{0,1,‚Ä¶,8}? What are the associated 90% prediction intervals? Summarise all of this in a table.

    3.  Using your test set, check how many percent of datapoints lie within the 90% prediction intervals.

4.  Do all steps of part 3. again, but this time you will be predicting `log_income = log(income)` instead of `income`.

5.  *Opportunity for showing extra effort:* Reflect on your results. What did you observe, and what do you think are the reasons for that?

## Data Preparation

### Data Load and Variable Rename

```{r}
# Load the dataset 'income.csv' into R as a data frame called 'income_data'
df_total <- read.csv("income.csv")

# data column name exploration 
str(df_total)

# remove unnecessary columns and rename the feature names as `income` and `children`.
income <- df_total$Total.Household.Income
children <- df_total$Members.with.age.5...17.years.old
```

### Initial Exploration Of Target Variable 'income' And 'children'

```{r}
# Print the first few rows of the data
cat("First few rows of Household Income:\n", head(income), "\n\n")
cat("First few rows of Number of Children:\n", head(children), "\n\n")

# Check for missing values
cat("Number of missing values in Household Income:", sum(is.na(income)), "\n")
cat("Number of missing values in Number of Children:", sum(is.na(children)), "\n")

# Print summaries in a concise way without storing the summaries separately
cat("\nSummary of Household Income:\n", 
    paste(names(summary(income)), summary(income), sep = " = ", collapse = "\n"), "\n\n")

cat("Summary of Number of Children:\n", 
    paste(names(summary(children)), summary(children), sep = " = ", collapse = "\n"), "\n")



```

```{r}
# Scatter plot of income vs. children
plot(children, income/10000, xlab = "Number of Children", ylab = "Household Income (in 10 Thousands)", main = "Income vs. Children")
```

## Linear Regression

### Training Set And Testing Set Preparation

```{r}
# Set a seed for reproducibility
set.seed(888)  # ‰Ω†ÂèØ‰ª•‰øÆÊîπ123‰∏∫‰ªªÊÑèÊï∞ÂÄº
# Combine income and children into a data frame
data <- data.frame(income = income, children = children)
# Split the data into training (80%) and test sets (20%)
train_data <- data[sample(1:nrow(data), size = 0.8 * nrow(data)), ]
test_data <- data[-sample(1:nrow(data), size = 0.8 * nrow(data)), ]

```

### Model Trainning

```{r}
# Fit a linear regression model
model <- lm(income ~ children, data = train_data)

# Print the summary of the model
summary(model)

```

### Model Explanation

1.  What is the specific form of the affine-linear model, i.e.¬†what are `b0` and `b1`?

-   The affine-linear model \|SLR model (simple linear regression model) has the general form: $\text{income} = b_0 + b_1 \cdot \text{children}$

-   $b_0$ is the **intercept** (the value of income when children = 0). Our model's $b_0= 262735$

-   $b_1$ is the **slope** (the change in income for a one-unit increase in children). Our model's $b_1= -11256$

-   So the specific form of our SLR model is:

    $\text{income} = 262735 ‚àí11256 \cdot \text{children}$

2.  What is the predicted mean income of a household with $ùëõ$ children, for $\text{n} ‚àà \{0,1,‚Ä¶,8\}$? What are the associated 90% prediction intervals? Summarise all of this in a table.

```{r}
n <- array(0:8)
b_0 <- 262735
b_1 <- -11256
income_n <- b_0+b_1*n
cat(paste0("The predicted mean income of a household with 0-8 children = ",mean(income_n)),"\n")
```

When the sample number $\text{n}=8$, which is very small, we could .... (to be continue)

2.  Using your test set, check how many percent of datapoints lie within the 90% prediction intervals.

# Predicting Possum Age

## Data and Initial Analysis

```{r}
# Load dataset and visualize
```

## Data Preparation

```{r}
# Preprocess dataset
```

## Feature Selection and Model Training

```{r}
# Forward feature selection and model training
```

## Model Evaluation

```{r}
# Compute evaluation metrics
```

## Further Exploration

```{r}
# Additional analysis or research questions
```
